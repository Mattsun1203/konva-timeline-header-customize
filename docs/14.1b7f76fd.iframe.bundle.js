"use strict";(self.webpackChunk_melfore_konva_timeline=self.webpackChunk_melfore_konva_timeline||[]).push([[14],{"./src/tasks/components/Layer/index.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_konva__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-konva/es/ReactKonva.js"),luxon__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/luxon/src/luxon.js"),_timeline_TimelineContext__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/timeline/TimelineContext.tsx"),_utils_tasks__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/tasks/utils/tasks.ts"),_Task__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/tasks/components/Task/index.tsx"),_Tooltip__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/tasks/components/Tooltip/index.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/react/jsx-runtime.js");function cov_1nacfvm119(){var path="/home/runner/work/konva-timeline/konva-timeline/src/tasks/components/Layer/index.tsx",global=new Function("return this")(),gcv="__coverage__",coverageData={path:"/home/runner/work/konva-timeline/konva-timeline/src/tasks/components/Layer/index.tsx",statementMap:{0:{start:{line:26,column:40},end:{line:126,column:1}},1:{start:{line:35,column:6},end:{line:35,column:26}},2:{start:{line:37,column:26},end:{line:40,column:3}},3:{start:{line:38,column:28},end:{line:38,column:78}},4:{start:{line:38,column:60},end:{line:38,column:77}},5:{start:{line:42,column:22},end:{line:42,column:101}},6:{start:{line:42,column:54},end:{line:42,column:91}},7:{start:{line:42,column:77},end:{line:42,column:90}},8:{start:{line:44,column:22},end:{line:44,column:79}},9:{start:{line:44,column:40},end:{line:44,column:60}},10:{start:{line:46,column:21},end:{line:57,column:3}},11:{start:{line:48,column:19},end:{line:48,column:38}},12:{start:{line:49,column:6},end:{line:51,column:7}},13:{start:{line:50,column:8},end:{line:50,column:36}},14:{start:{line:53,column:23},end:{line:53,column:28}},15:{start:{line:54,column:6},end:{line:54,column:37}},16:{start:{line:59,column:25},end:{line:62,column:3}},17:{start:{line:60,column:24},end:{line:60,column:71}},18:{start:{line:64,column:29},end:{line:71,column:3}},19:{start:{line:66,column:24},end:{line:66,column:54}},20:{start:{line:67,column:32},end:{line:67,column:82}},21:{start:{line:68,column:6},end:{line:68,column:47}},22:{start:{line:73,column:23},end:{line:81,column:3}},23:{start:{line:75,column:24},end:{line:75,column:50}},24:{start:{line:76,column:22},end:{line:76,column:46}},25:{start:{line:77,column:32},end:{line:77,column:75}},26:{start:{line:78,column:6},end:{line:78,column:47}},27:{start:{line:83,column:2},end:{line:85,column:3}},28:{start:{line:84,column:4},end:{line:84,column:16}},29:{start:{line:87,column:2},end:{line:89,column:3}},30:{start:{line:88,column:4},end:{line:88,column:16}},31:{start:{line:91,column:2},end:{line:125,column:4}},32:{start:{line:94,column:37},end:{line:94,column:45}},33:{start:{line:95,column:30},end:{line:95,column:57}},34:{start:{line:96,column:8},end:{line:98,column:9}},35:{start:{line:97,column:10},end:{line:97,column:22}},36:{start:{line:100,column:58},end:{line:100,column:82}},37:{start:{line:101,column:28},end:{line:101,column:58}},38:{start:{line:102,column:28},end:{line:102,column:72}},39:{start:{line:103,column:22},end:{line:103,column:40}},40:{start:{line:104,column:8},end:{line:106,column:9}},41:{start:{line:105,column:10},end:{line:105,column:22}},42:{start:{line:108,column:8},end:{line:121,column:10}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:26,column:40},end:{line:26,column:41}},loc:{start:{line:26,column:85},end:{line:126,column:1}},line:26},1:{name:"(anonymous_1)",decl:{start:{line:38,column:4},end:{line:38,column:5}},loc:{start:{line:38,column:28},end:{line:38,column:78}},line:38},2:{name:"(anonymous_2)",decl:{start:{line:38,column:48},end:{line:38,column:49}},loc:{start:{line:38,column:60},end:{line:38,column:77}},line:38},3:{name:"(anonymous_3)",decl:{start:{line:42,column:34},end:{line:42,column:35}},loc:{start:{line:42,column:54},end:{line:42,column:91}},line:42},4:{name:"(anonymous_4)",decl:{start:{line:42,column:65},end:{line:42,column:66}},loc:{start:{line:42,column:77},end:{line:42,column:90}},line:42},5:{name:"(anonymous_5)",decl:{start:{line:44,column:34},end:{line:44,column:35}},loc:{start:{line:44,column:40},end:{line:44,column:60}},line:44},6:{name:"(anonymous_6)",decl:{start:{line:47,column:4},end:{line:47,column:5}},loc:{start:{line:47,column:43},end:{line:55,column:5}},line:47},7:{name:"(anonymous_7)",decl:{start:{line:60,column:4},end:{line:60,column:5}},loc:{start:{line:60,column:24},end:{line:60,column:71}},line:60},8:{name:"(anonymous_8)",decl:{start:{line:65,column:4},end:{line:65,column:5}},loc:{start:{line:65,column:27},end:{line:69,column:5}},line:65},9:{name:"(anonymous_9)",decl:{start:{line:74,column:4},end:{line:74,column:5}},loc:{start:{line:74,column:43},end:{line:79,column:5}},line:74},10:{name:"(anonymous_10)",decl:{start:{line:93,column:17},end:{line:93,column:18}},loc:{start:{line:93,column:31},end:{line:122,column:7}},line:93}},branchMap:{0:{loc:{start:{line:49,column:6},end:{line:51,column:7}},type:"if",locations:[{start:{line:49,column:6},end:{line:51,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},1:{loc:{start:{line:83,column:2},end:{line:85,column:3}},type:"if",locations:[{start:{line:83,column:2},end:{line:85,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:83},2:{loc:{start:{line:83,column:6},end:{line:83,column:36}},type:"binary-expr",locations:[{start:{line:83,column:6},end:{line:83,column:20}},{start:{line:83,column:24},end:{line:83,column:36}}],line:83},3:{loc:{start:{line:87,column:2},end:{line:89,column:3}},type:"if",locations:[{start:{line:87,column:2},end:{line:89,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:87},4:{loc:{start:{line:96,column:8},end:{line:98,column:9}},type:"if",locations:[{start:{line:96,column:8},end:{line:98,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:96},5:{loc:{start:{line:104,column:8},end:{line:106,column:9}},type:"if",locations:[{start:{line:104,column:8},end:{line:106,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:104},6:{loc:{start:{line:104,column:12},end:{line:104,column:80}},type:"binary-expr",locations:[{start:{line:104,column:12},end:{line:104,column:39}},{start:{line:104,column:43},end:{line:104,column:80}}],line:104},7:{loc:{start:{line:123,column:7},end:{line:123,column:54}},type:"binary-expr",locations:[{start:{line:123,column:7},end:{line:123,column:18}},{start:{line:123,column:22},end:{line:123,column:54}}],line:123}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"52af885cb3b56831013fd7b69d8b908399f00eef"},coverage=global[gcv]||(global[gcv]={});coverage[path]&&"52af885cb3b56831013fd7b69d8b908399f00eef"===coverage[path].hash||(coverage[path]=coverageData);var actualCoverage=coverage[path];return cov_1nacfvm119=function(){return actualCoverage},actualCoverage}cov_1nacfvm119(),cov_1nacfvm119().s[0]++;const TasksLayer=({setTaskTooltip:setTaskTooltip,taskTooltip:taskTooltip,create:create})=>{cov_1nacfvm119().f[0]++;const{columnWidth:columnWidth,drawRange:drawRange,interval:{start:intervalStart,end:intervalEnd},resolution:resolution,resources:resources,rowHeight:rowHeight,tasks:tasks}=(cov_1nacfvm119().s[1]++,(0,_timeline_TimelineContext__WEBPACK_IMPORTED_MODULE_3__.i)()),getResourceById=(cov_1nacfvm119().s[2]++,(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((resourceId=>(cov_1nacfvm119().f[1]++,cov_1nacfvm119().s[3]++,resources.findIndex((({id:id})=>(cov_1nacfvm119().f[2]++,cov_1nacfvm119().s[4]++,resourceId===id))))),[resources])),getTaskById=(cov_1nacfvm119().s[5]++,(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((taskId=>(cov_1nacfvm119().f[3]++,cov_1nacfvm119().s[6]++,tasks.find((({id:id})=>(cov_1nacfvm119().f[4]++,cov_1nacfvm119().s[7]++,taskId===id))))),[tasks])),onTaskLeave=(cov_1nacfvm119().s[8]++,(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((()=>(cov_1nacfvm119().f[5]++,cov_1nacfvm119().s[9]++,setTaskTooltip(null))),[setTaskTooltip])),onTaskOver=(cov_1nacfvm119().s[10]++,(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(((taskId,point)=>{cov_1nacfvm119().f[6]++;const task=(cov_1nacfvm119().s[11]++,getTaskById(taskId));if(cov_1nacfvm119().s[12]++,!task)return cov_1nacfvm119().b[0][0]++,cov_1nacfvm119().s[13]++,setTaskTooltip(null);cov_1nacfvm119().b[0][1]++;const{x:x,y:y}=(cov_1nacfvm119().s[14]++,point);cov_1nacfvm119().s[15]++,setTaskTooltip({task:task,x:x,y:y})}),[getTaskById,setTaskTooltip])),getXCoordinate=(cov_1nacfvm119().s[16]++,(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((offset=>(cov_1nacfvm119().f[7]++,cov_1nacfvm119().s[17]++,offset*columnWidth/resolution.sizeInUnits)),[columnWidth,resolution.sizeInUnits])),getTaskXCoordinate=(cov_1nacfvm119().s[18]++,(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((startTime=>{cov_1nacfvm119().f[8]++;const timeStart=(cov_1nacfvm119().s[19]++,luxon__WEBPACK_IMPORTED_MODULE_2__.ou.fromMillis(startTime)),startOffsetInUnit=(cov_1nacfvm119().s[20]++,timeStart.diff(intervalStart).as(resolution.unit));return cov_1nacfvm119().s[21]++,getXCoordinate(startOffsetInUnit)}),[getXCoordinate,intervalStart,resolution.unit])),getTaskWidth=(cov_1nacfvm119().s[22]++,(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((({start:start,end:end})=>{cov_1nacfvm119().f[9]++;const timeStart=(cov_1nacfvm119().s[23]++,luxon__WEBPACK_IMPORTED_MODULE_2__.ou.fromMillis(start)),timeEnd=(cov_1nacfvm119().s[24]++,luxon__WEBPACK_IMPORTED_MODULE_2__.ou.fromMillis(end)),widthOffsetInUnit=(cov_1nacfvm119().s[25]++,timeEnd.diff(timeStart).as(resolution.unit));return cov_1nacfvm119().s[26]++,getXCoordinate(widthOffsetInUnit)}),[getXCoordinate,resolution.unit]));return cov_1nacfvm119().s[27]++,cov_1nacfvm119().b[2][0]++,intervalStart&&(cov_1nacfvm119().b[2][1]++,intervalEnd)?(cov_1nacfvm119().b[1][1]++,cov_1nacfvm119().s[29]++,drawRange.end-drawRange.start<=0?(cov_1nacfvm119().b[3][0]++,cov_1nacfvm119().s[30]++,null):(cov_1nacfvm119().b[3][1]++,cov_1nacfvm119().s[31]++,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(react_konva__WEBPACK_IMPORTED_MODULE_1__.mh,{children:[tasks.map((taskData=>{cov_1nacfvm119().f[10]++;const{resourceId:resourceId,time:time}=(cov_1nacfvm119().s[32]++,taskData),resourceIndex=(cov_1nacfvm119().s[33]++,getResourceById(resourceId));if(cov_1nacfvm119().s[34]++,resourceIndex<0)return cov_1nacfvm119().b[4][0]++,cov_1nacfvm119().s[35]++,null;cov_1nacfvm119().b[4][1]++;const{color:resourceColor,toCompleteColor:toCompleteColor}=(cov_1nacfvm119().s[36]++,resources[resourceIndex]),xCoordinate=(cov_1nacfvm119().s[37]++,getTaskXCoordinate(time.start)),yCoordinate=(cov_1nacfvm119().s[38]++,(0,_utils_tasks__WEBPACK_IMPORTED_MODULE_4__.rc)(resourceIndex,rowHeight)),width=(cov_1nacfvm119().s[39]++,getTaskWidth(time));return cov_1nacfvm119().s[40]++,cov_1nacfvm119().b[6][0]++,xCoordinate>drawRange.end||(cov_1nacfvm119().b[6][1]++,xCoordinate+width<drawRange.start)?(cov_1nacfvm119().b[5][0]++,cov_1nacfvm119().s[41]++,null):(cov_1nacfvm119().b[5][1]++,cov_1nacfvm119().s[42]++,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_Task__WEBPACK_IMPORTED_MODULE_5__.Z,{data:taskData,fill:resourceColor,fillToComplete:toCompleteColor,onLeave:onTaskLeave,onOver:onTaskOver,x:xCoordinate,y:yCoordinate,width:width,disabled:create},`task-${taskData.id}`))})),(cov_1nacfvm119().b[7][0]++,taskTooltip&&(cov_1nacfvm119().b[7][1]++,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_Tooltip__WEBPACK_IMPORTED_MODULE_6__.Z,{...taskTooltip})))]}))):(cov_1nacfvm119().b[1][0]++,cov_1nacfvm119().s[28]++,null)};TasksLayer.displayName="TasksLayer",__webpack_exports__.Z=TasksLayer;try{Layer.displayName="Layer",Layer.__docgenInfo={description:"This component renders a set of tasks as a Konva Layer.\nTasks are displayed accordingly to their assigned resource (different vertical / row position) and their timing (different horizontal / column position)\n`TasksLayer` is also responsible of handling callback for task components offering base implementation for click, leave and over.\n\nThe playground has a canvas that simulates 1 day of data with 1 hour resolution.\nDepending on your screen size you might be able to test also the horizontal scrolling behaviour.",displayName:"Layer",props:{taskTooltip:{defaultValue:null,description:"",name:"taskTooltip",required:!0,type:{name:"TaskTooltipProps | null"}},setTaskTooltip:{defaultValue:null,description:"",name:"setTaskTooltip",required:!0,type:{name:"(tooltip: TaskTooltipProps | null) => void"}},create:{defaultValue:null,description:"",name:"create",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/tasks/components/Layer/index.tsx#Layer"]={docgenInfo:Layer.__docgenInfo,name:"Layer",path:"src/tasks/components/Layer/index.tsx#Layer"})}catch(__react_docgen_typescript_loader_error){}}}]);